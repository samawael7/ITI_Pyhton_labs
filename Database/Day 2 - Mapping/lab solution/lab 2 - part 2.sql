CREATE TABLE EMPLOYEE (
    SSN INT PRIMARY KEY,
    FNAME VARCHAR(20),
    LNAME VARCHAR(20),
    DOB DATE,
    ADDRESS VARCHAR(50),
    SEX CHAR(1),
    SALARY DECIMAL(18,0),
    SUPERSSN INT,
    DNO INT
);

CREATE TABLE DEPARTMENT (
    DNUMBER INT PRIMARY KEY,
    DNAME VARCHAR(20),
    MGRSSN INT,
    MGRSTARTDATE DATE
);

CREATE TABLE DEPT_LOCATIONS (
    DNUMBER INT,
    DLOCATION VARCHAR(20),
    PRIMARY KEY (DNUMBER, DLOCATION)
);

CREATE TABLE PROJECT (
    PNUMBER INT PRIMARY KEY,
    PNAME VARCHAR(20),
    PLOCATION VARCHAR(20),
    DNUM INT
);

CREATE TABLE WORKS_ON (
    ESSN INT,
    PNO INT,
    HOURS DECIMAL(18,2),
    PRIMARY KEY (ESSN, PNO)
);

CREATE TABLE DEPENDENT (
    ESSN INT,
    DEPENDENT_NAME VARCHAR(20),
    SEX CHAR(1),
    BDATE DATE,
    RELATIONSHIP VARCHAR(20),
    PRIMARY KEY (ESSN, DEPENDENT_NAME)
);

INSERT INTO DEPARTMENT VALUES
(1, 'DATA ENGINEERING', NULL, '2020-01-01'),
(2, 'WEB', NULL, '2019-05-10'),
(3, 'GRAPHICS', NULL, '2018-03-15'),
(4, 'IT', NULL, '2021-07-01'),
(5, 'SALES', NULL, '2017-09-20');


INSERT INTO EMPLOYEE VALUES
(123, 'SAMA', 'WAEL', '2003-07-27', 'GIZA', 'F', 150000, NULL, 1),
(246, 'OMNIA', 'MAHMOUD', '2000-06-25', 'ZAG', 'F', 60000, 123, 2),
(369, 'MARWA', 'ALI', '1998-03-12', 'CAIRO', 'F', 50000, 123, 1),
(482, 'ISRAA', 'EHAB', '1999-11-05', 'ALEX', 'F', 55000, 246, 3),
(575, 'ALI', 'HASSAN', '1997-01-20', 'GIZA', 'M', 70000, 246, 2);


INSERT INTO DEPT_LOCATIONS VALUES
(1, 'GIZA'),
(2, 'CAIRO'),
(3, 'ALEX'),
(4, 'ZAG'),
(5, 'GIZA');

INSERT INTO PROJECT VALUES
(1, 'PROJECT1', 'GIZA', 1),
(2, 'PROJECT2', 'CAIRO', 2),
(3, 'PROJECT3', 'ALEX', 3),
(4, 'PROJECT4', 'ZAG', 4),
(5, 'PROJECT5', 'GIZA', 5);

INSERT INTO WORKS_ON VALUES
(123, 1, 40.00),
(246, 2, 35.50),
(369, 3, 30.00),
(482, 4, 45.00),
(575, 5, 38.75);

INSERT INTO DEPENDENT VALUES
(123, 'LAYLA', 'F', '2020-05-15', 'DAUGHTER'),
(246, 'AHMED', 'M', '2018-03-22', 'SON'),
(369, 'FATMA', 'F', '2015-11-10', 'DAUGHTER'),
(482, 'OMAR', 'M', '2019-07-08', 'SON'),
(575, 'NOUR', 'F', '2021-01-30', 'DAUGHTER');

UPDATE DEPARTMENT SET MGRSSN = 123 WHERE DNUMBER = 1;
UPDATE DEPARTMENT SET MGRSSN = 246 WHERE DNUMBER = 2;
UPDATE DEPARTMENT SET MGRSSN = 482 WHERE DNUMBER = 3;
UPDATE DEPARTMENT SET MGRSSN = 575 WHERE DNUMBER = 4;
UPDATE DEPARTMENT SET MGRSSN = 369 WHERE DNUMBER = 5;


ALTER TABLE EMPLOYEE
ADD FOREIGN KEY (SUPERSSN) REFERENCES EMPLOYEE(SSN);

ALTER TABLE EMPLOYEE
ADD FOREIGN KEY (DNO) REFERENCES DEPARTMENT(DNUMBER);

ALTER TABLE DEPARTMENT
ADD FOREIGN KEY (MGRSSN) REFERENCES EMPLOYEE(SSN);

ALTER TABLE DEPT_LOCATIONS
ADD FOREIGN KEY (DNUMBER) REFERENCES DEPARTMENT(DNUMBER);

ALTER TABLE PROJECT
ADD FOREIGN KEY (DNUM) REFERENCES DEPARTMENT(DNUMBER);

ALTER TABLE WORKS_ON
ADD FOREIGN KEY (ESSN) REFERENCES EMPLOYEE(SSN);

ALTER TABLE WORKS_ON
ADD FOREIGN KEY (PNO) REFERENCES PROJECT(PNUMBER);

ALTER TABLE DEPENDENT
ADD FOREIGN KEY (ESSN) REFERENCES EMPLOYEE(SSN);
